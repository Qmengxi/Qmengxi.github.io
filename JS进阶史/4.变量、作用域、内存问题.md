# 4.变量、作用域、内存

## 1.基本类型和引用类型

基本类型：简单的数据段。

引用类型：可能由多个值构成的对象。

引用类型的值是保存在内存中的对象。JavaScript不允许直接访问内存中的文职，也就不能直接操作对象的内存空间。

在操作对象时，实际是在操作对象的引用。

### 检测类型

typeof，检测函数，数值，字符串，布尔值，undefined。null及对象将返回“object”

instanceod，检测对象的类型。

```javascript
person instanceof Object; //person是Object吗？
color instanceof Arrary; //color是Arrary吗？
pattern instanceof RegExp; //pattern是RegExp吗？
```

## 2.执行环境及作用域

执行环境：定义了变量或函数有权访问的其数据，决定了它们各自的行为。

每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。

全局执行环境是最外围的一个执行环境。

每个函数都有自己的执行环境。

当代码在一个环境中执行时，会创建变量对象的一个**作用域链**。作用域链的用途是保证对执行环境有权访问的所有变量和函数的有序访问。

** 内部环境可以通过作用域链访问所有的外部环境，但外部环境不能访问内部环境中的任何变量和函数。

### 延长作用域链

* try-catch的catch块
* with语句

这两个语句会在作用域的前端添加一个变量对象。

with语句，会讲指定的对象添加到作用域链中。

catch语句，会常见一个新的变量对象，其中包含的是被抛出的错误对象的声明。

## 3.垃圾收集

### 标记清除

JavaScript最常用的垃圾收集机制。

当变量进入环境时，就将这个变量标记为“进入环境”。

垃圾收集器在运行的时候会给存储在内存中的所有变量都加上标记。然后，它会去掉环境中的变量以及被环境中的变量引用的变量的标记。

### 引用计数

另一种垃圾回收机制。

### 管理内存

优化内存占用的最佳方式，就是为执行中的代码只保存必要的数据。

一旦数据不再有用，通过将其值设置为null来释放其引用------解除引用



